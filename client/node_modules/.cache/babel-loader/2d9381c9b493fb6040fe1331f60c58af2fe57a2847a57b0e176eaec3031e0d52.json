{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { FaceMesh } from \"@mediapipe/face_mesh\";\nexport default function PostureAnalyzer({\n  videoRef,\n  onScoreUpdate\n}) {\n  _s();\n  useEffect(() => {\n    if (!(videoRef !== null && videoRef !== void 0 && videoRef.current)) return;\n    const faceMesh = new FaceMesh({\n      locateFile: file => require(\"@mediapipe/face_mesh/\" + file)\n    });\n    faceMesh.setOptions({\n      maxNumFaces: 1,\n      refineLandmarks: true,\n      minDetectionConfidence: 0.6,\n      minTrackingConfidence: 0.6\n    });\n    faceMesh.onResults(results => {\n      if (!results.multiFaceLandmarks) return;\n      const landmarks = results.multiFaceLandmarks[0];\n      const leftEye = landmarks[33];\n      const rightEye = landmarks[263];\n      const noseTip = landmarks[1];\n      const eyeCenterX = (leftEye.x + rightEye.x) / 2;\n      const gazeOffset = Math.abs(noseTip.x - eyeCenterX);\n      const eyeContactScore = 1 - Math.min(gazeOffset * 3, 1);\n      const tilt = Math.abs(leftEye.y - rightEye.y);\n      const headTiltScore = 1 - Math.min(tilt * 5, 1);\n      const jaw = landmarks[152];\n      const chinMovement = Math.abs(jaw.x - noseTip.x);\n      const movementScore = 1 - Math.min(chinMovement * 2, 1);\n      const finalScore = eyeContactScore * 0.5 + headTiltScore * 0.3 + movementScore * 0.2;\n      onScoreUpdate(finalScore);\n    });\n    let animationFrame;\n    const analyze = async () => {\n      var _videoRef$current;\n      if (((_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.readyState) === 4) {\n        await faceMesh.send({\n          image: videoRef.current\n        });\n      }\n      animationFrame = requestAnimationFrame(analyze);\n    };\n    analyze();\n    return () => cancelAnimationFrame(animationFrame);\n  }, [videoRef, onScoreUpdate]);\n  return null;\n}\n_s(PostureAnalyzer, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = PostureAnalyzer;\nvar _c;\n$RefreshReg$(_c, \"PostureAnalyzer\");","map":{"version":3,"names":["useEffect","FaceMesh","PostureAnalyzer","videoRef","onScoreUpdate","_s","current","faceMesh","locateFile","file","require","setOptions","maxNumFaces","refineLandmarks","minDetectionConfidence","minTrackingConfidence","onResults","results","multiFaceLandmarks","landmarks","leftEye","rightEye","noseTip","eyeCenterX","x","gazeOffset","Math","abs","eyeContactScore","min","tilt","y","headTiltScore","jaw","chinMovement","movementScore","finalScore","animationFrame","analyze","_videoRef$current","readyState","send","image","requestAnimationFrame","cancelAnimationFrame","_c","$RefreshReg$"],"sources":["/Users/siva/Desktop/AI-INTERVIEW/client/src/components/PostureAnalyzer.jsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { FaceMesh } from \"@mediapipe/face_mesh\";\n\nexport default function PostureAnalyzer({ videoRef, onScoreUpdate }) {\n  useEffect(() => {\n    if (!videoRef?.current) return;\n\n    const faceMesh = new FaceMesh({\n      locateFile: (file) =>\n        require(\"@mediapipe/face_mesh/\" + file),\n    });\n\n    faceMesh.setOptions({\n      maxNumFaces: 1,\n      refineLandmarks: true,\n      minDetectionConfidence: 0.6,\n      minTrackingConfidence: 0.6,\n    });\n\n    faceMesh.onResults((results) => {\n      if (!results.multiFaceLandmarks) return;\n\n      const landmarks = results.multiFaceLandmarks[0];\n\n      const leftEye = landmarks[33];\n      const rightEye = landmarks[263];\n      const noseTip = landmarks[1];\n\n      const eyeCenterX = (leftEye.x + rightEye.x) / 2;\n      const gazeOffset = Math.abs(noseTip.x - eyeCenterX);\n      const eyeContactScore = 1 - Math.min(gazeOffset * 3, 1);\n\n      const tilt = Math.abs(leftEye.y - rightEye.y);\n      const headTiltScore = 1 - Math.min(tilt * 5, 1);\n\n      const jaw = landmarks[152];\n      const chinMovement = Math.abs(jaw.x - noseTip.x);\n      const movementScore = 1 - Math.min(chinMovement * 2, 1);\n\n      const finalScore =\n        eyeContactScore * 0.5 +\n        headTiltScore * 0.3 +\n        movementScore * 0.2;\n\n      onScoreUpdate(finalScore);\n    });\n\n    let animationFrame;\n\n    const analyze = async () => {\n      if (videoRef.current?.readyState === 4) {\n        await faceMesh.send({ image: videoRef.current });\n      }\n      animationFrame = requestAnimationFrame(analyze);\n    };\n\n    analyze();\n\n    return () => cancelAnimationFrame(animationFrame);\n  }, [videoRef, onScoreUpdate]);\n\n  return null;\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,QAAQ,QAAQ,sBAAsB;AAE/C,eAAe,SAASC,eAAeA,CAAC;EAAEC,QAAQ;EAAEC;AAAc,CAAC,EAAE;EAAAC,EAAA;EACnEL,SAAS,CAAC,MAAM;IACd,IAAI,EAACG,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEG,OAAO,GAAE;IAExB,MAAMC,QAAQ,GAAG,IAAIN,QAAQ,CAAC;MAC5BO,UAAU,EAAGC,IAAI,IACfC,OAAO,CAAC,uBAAuB,GAAGD,IAAI;IAC1C,CAAC,CAAC;IAEFF,QAAQ,CAACI,UAAU,CAAC;MAClBC,WAAW,EAAE,CAAC;MACdC,eAAe,EAAE,IAAI;MACrBC,sBAAsB,EAAE,GAAG;MAC3BC,qBAAqB,EAAE;IACzB,CAAC,CAAC;IAEFR,QAAQ,CAACS,SAAS,CAAEC,OAAO,IAAK;MAC9B,IAAI,CAACA,OAAO,CAACC,kBAAkB,EAAE;MAEjC,MAAMC,SAAS,GAAGF,OAAO,CAACC,kBAAkB,CAAC,CAAC,CAAC;MAE/C,MAAME,OAAO,GAAGD,SAAS,CAAC,EAAE,CAAC;MAC7B,MAAME,QAAQ,GAAGF,SAAS,CAAC,GAAG,CAAC;MAC/B,MAAMG,OAAO,GAAGH,SAAS,CAAC,CAAC,CAAC;MAE5B,MAAMI,UAAU,GAAG,CAACH,OAAO,CAACI,CAAC,GAAGH,QAAQ,CAACG,CAAC,IAAI,CAAC;MAC/C,MAAMC,UAAU,GAAGC,IAAI,CAACC,GAAG,CAACL,OAAO,CAACE,CAAC,GAAGD,UAAU,CAAC;MACnD,MAAMK,eAAe,GAAG,CAAC,GAAGF,IAAI,CAACG,GAAG,CAACJ,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC;MAEvD,MAAMK,IAAI,GAAGJ,IAAI,CAACC,GAAG,CAACP,OAAO,CAACW,CAAC,GAAGV,QAAQ,CAACU,CAAC,CAAC;MAC7C,MAAMC,aAAa,GAAG,CAAC,GAAGN,IAAI,CAACG,GAAG,CAACC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC;MAE/C,MAAMG,GAAG,GAAGd,SAAS,CAAC,GAAG,CAAC;MAC1B,MAAMe,YAAY,GAAGR,IAAI,CAACC,GAAG,CAACM,GAAG,CAACT,CAAC,GAAGF,OAAO,CAACE,CAAC,CAAC;MAChD,MAAMW,aAAa,GAAG,CAAC,GAAGT,IAAI,CAACG,GAAG,CAACK,YAAY,GAAG,CAAC,EAAE,CAAC,CAAC;MAEvD,MAAME,UAAU,GACdR,eAAe,GAAG,GAAG,GACrBI,aAAa,GAAG,GAAG,GACnBG,aAAa,GAAG,GAAG;MAErB/B,aAAa,CAACgC,UAAU,CAAC;IAC3B,CAAC,CAAC;IAEF,IAAIC,cAAc;IAElB,MAAMC,OAAO,GAAG,MAAAA,CAAA,KAAY;MAAA,IAAAC,iBAAA;MAC1B,IAAI,EAAAA,iBAAA,GAAApC,QAAQ,CAACG,OAAO,cAAAiC,iBAAA,uBAAhBA,iBAAA,CAAkBC,UAAU,MAAK,CAAC,EAAE;QACtC,MAAMjC,QAAQ,CAACkC,IAAI,CAAC;UAAEC,KAAK,EAAEvC,QAAQ,CAACG;QAAQ,CAAC,CAAC;MAClD;MACA+B,cAAc,GAAGM,qBAAqB,CAACL,OAAO,CAAC;IACjD,CAAC;IAEDA,OAAO,CAAC,CAAC;IAET,OAAO,MAAMM,oBAAoB,CAACP,cAAc,CAAC;EACnD,CAAC,EAAE,CAAClC,QAAQ,EAAEC,aAAa,CAAC,CAAC;EAE7B,OAAO,IAAI;AACb;AAACC,EAAA,CA3DuBH,eAAe;AAAA2C,EAAA,GAAf3C,eAAe;AAAA,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}