{"ast":null,"code":"var _jsxFileName = \"/Users/siva/Desktop/AI-INTERVIEW/client/src/components/PostureAnalyzer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { FaceMesh } from \"@mediapipe/face_mesh\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostureAnalyzer({\n  onScoreUpdate\n}) {\n  _s();\n  const videoRef = useRef(null);\n  const [eyeScore, setEyeScore] = useState(0);\n  const [postureScore, setPostureScore] = useState(0);\n  const [confidenceScore, setConfidenceScore] = useState(0);\n  useEffect(() => {\n    const faceMesh = new FaceMesh({\n      locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`\n    });\n    const pose = new Pose({\n      locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`\n    });\n    faceMesh.setOptions({\n      maxNumFaces: 1,\n      refineLandmarks: true\n    });\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true\n    });\n\n    // ðŸ”¥ FACE RESULTS\n    faceMesh.onResults(results => {\n      if (!results.multiFaceLandmarks.length) return;\n      const landmarks = results.multiFaceLandmarks[0];\n      const leftIris = landmarks[468];\n      const rightIris = landmarks[473];\n      const nose = landmarks[1];\n      const eyeCenterX = (leftIris.x + rightIris.x) / 2;\n      const delta = Math.abs(eyeCenterX - nose.x);\n      let score = 0;\n      if (delta < 0.02) score = 1; // good eye contact\n      else if (delta < 0.05) score = 0.5;else score = 0;\n      setEyeScore(score);\n    });\n\n    // ðŸ”¥ POSE RESULTS\n    pose.onResults(results => {\n      if (!results.poseLandmarks) return;\n      const leftShoulder = results.poseLandmarks[11];\n      const rightShoulder = results.poseLandmarks[12];\n      const nose = results.poseLandmarks[0];\n      const midShoulderX = (leftShoulder.x + rightShoulder.x) / 2;\n      const delta = Math.abs(nose.x - midShoulderX);\n      let score = 0;\n      if (delta < 0.05) score = 1; // upright\n      else if (delta < 0.1) score = 0.5;else score = 0;\n      setPostureScore(score);\n    });\n    const camera = new Camera(videoRef.current, {\n      onFrame: async () => {\n        await faceMesh.send({\n          image: videoRef.current\n        });\n        await pose.send({\n          image: videoRef.current\n        });\n      },\n      width: 640,\n      height: 480\n    });\n    camera.start();\n  }, []);\n\n  // ðŸ”¥ CONFIDENCE CALCULATION\n  useEffect(() => {\n    const score = 0.6 * eyeScore + 0.4 * postureScore;\n    setConfidenceScore(score);\n    if (onScoreUpdate) {\n      onScoreUpdate(score);\n    }\n  }, [eyeScore, postureScore]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      style: {\n        width: \"100%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Eye Contact: \", (eyeScore * 100).toFixed(0), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Posture: \", (postureScore * 100).toFixed(0), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Confidence: \", (confidenceScore * 100).toFixed(0), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n}\n_s(PostureAnalyzer, \"eSw1EpqOVfYJPMTZmrA3lNbsXb8=\");\n_c = PostureAnalyzer;\nvar _c;\n$RefreshReg$(_c, \"PostureAnalyzer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","FaceMesh","Pose","Camera","jsxDEV","_jsxDEV","PostureAnalyzer","onScoreUpdate","_s","videoRef","eyeScore","setEyeScore","postureScore","setPostureScore","confidenceScore","setConfidenceScore","faceMesh","locateFile","file","pose","setOptions","maxNumFaces","refineLandmarks","modelComplexity","smoothLandmarks","onResults","results","multiFaceLandmarks","length","landmarks","leftIris","rightIris","nose","eyeCenterX","x","delta","Math","abs","score","poseLandmarks","leftShoulder","rightShoulder","midShoulderX","camera","current","onFrame","send","image","width","height","start","children","ref","style","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","toFixed","_c","$RefreshReg$"],"sources":["/Users/siva/Desktop/AI-INTERVIEW/client/src/components/PostureAnalyzer.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { FaceMesh } from \"@mediapipe/face_mesh\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\n\nexport default function PostureAnalyzer({ onScoreUpdate }) {\n  const videoRef = useRef(null);\n\n  const [eyeScore, setEyeScore] = useState(0);\n  const [postureScore, setPostureScore] = useState(0);\n  const [confidenceScore, setConfidenceScore] = useState(0);\n\n  useEffect(() => {\n    const faceMesh = new FaceMesh({\n      locateFile: (file) =>\n        `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`,\n    });\n\n    const pose = new Pose({\n      locateFile: (file) =>\n        `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`,\n    });\n\n    faceMesh.setOptions({\n      maxNumFaces: 1,\n      refineLandmarks: true,\n    });\n\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n    });\n\n    // ðŸ”¥ FACE RESULTS\n    faceMesh.onResults((results) => {\n      if (!results.multiFaceLandmarks.length) return;\n\n      const landmarks = results.multiFaceLandmarks[0];\n\n      const leftIris = landmarks[468];\n      const rightIris = landmarks[473];\n      const nose = landmarks[1];\n\n      const eyeCenterX = (leftIris.x + rightIris.x) / 2;\n      const delta = Math.abs(eyeCenterX - nose.x);\n\n      let score = 0;\n      if (delta < 0.02) score = 1; // good eye contact\n      else if (delta < 0.05) score = 0.5;\n      else score = 0;\n\n      setEyeScore(score);\n    });\n\n    // ðŸ”¥ POSE RESULTS\n    pose.onResults((results) => {\n      if (!results.poseLandmarks) return;\n\n      const leftShoulder = results.poseLandmarks[11];\n      const rightShoulder = results.poseLandmarks[12];\n      const nose = results.poseLandmarks[0];\n\n      const midShoulderX =\n        (leftShoulder.x + rightShoulder.x) / 2;\n\n      const delta = Math.abs(nose.x - midShoulderX);\n\n      let score = 0;\n      if (delta < 0.05) score = 1; // upright\n      else if (delta < 0.1) score = 0.5;\n      else score = 0;\n\n      setPostureScore(score);\n    });\n\n    const camera = new Camera(videoRef.current, {\n      onFrame: async () => {\n        await faceMesh.send({ image: videoRef.current });\n        await pose.send({ image: videoRef.current });\n      },\n      width: 640,\n      height: 480,\n    });\n\n    camera.start();\n  }, []);\n\n  // ðŸ”¥ CONFIDENCE CALCULATION\n  useEffect(() => {\n    const score = 0.6 * eyeScore + 0.4 * postureScore;\n    setConfidenceScore(score);\n\n    if (onScoreUpdate) {\n      onScoreUpdate(score);\n    }\n  }, [eyeScore, postureScore]);\n\n  return (\n    <div>\n      <video ref={videoRef} style={{ width: \"100%\" }} />\n\n      <div style={{ marginTop: 10 }}>\n        <p>Eye Contact: {(eyeScore * 100).toFixed(0)}%</p>\n        <p>Posture: {(postureScore * 100).toFixed(0)}%</p>\n        <p>\n          Confidence: {(confidenceScore * 100).toFixed(0)}%\n        </p>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}