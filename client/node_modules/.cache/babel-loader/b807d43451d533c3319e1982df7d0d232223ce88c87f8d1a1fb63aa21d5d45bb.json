{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nexport default function PostureAnalyzer({\n  videoRef,\n  onScoreUpdate\n}) {\n  _s();\n  useEffect(() => {\n    if (!(videoRef !== null && videoRef !== void 0 && videoRef.current)) return;\n\n    // Load MediaPipe script dynamically\n    const script = document.createElement(\"script\");\n    script.src = \"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js\";\n    script.async = true;\n    script.onload = () => {\n      const faceMesh = new window.FaceMesh({\n        locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`\n      });\n      faceMesh.setOptions({\n        maxNumFaces: 1,\n        refineLandmarks: true,\n        minDetectionConfidence: 0.5,\n        minTrackingConfidence: 0.5\n      });\n      faceMesh.onResults(results => {\n        if (!results.multiFaceLandmarks) return;\n        const landmarks = results.multiFaceLandmarks[0];\n        const leftEye = landmarks[33];\n        const rightEye = landmarks[263];\n        const nose = landmarks[1];\n        const eyeCenterX = (leftEye.x + rightEye.x) / 2;\n        const gazeOffset = Math.abs(nose.x - eyeCenterX);\n        const eyeScore = 1 - Math.min(gazeOffset * 3, 1);\n        onScoreUpdate(eyeScore);\n      });\n      const interval = setInterval(async () => {\n        if (videoRef.current.readyState >= 2) {\n          await faceMesh.send({\n            image: videoRef.current\n          });\n        }\n      }, 100);\n      return () => clearInterval(interval);\n    };\n    document.body.appendChild(script);\n  }, [videoRef, onScoreUpdate]);\n  return null;\n}\n_s(PostureAnalyzer, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = PostureAnalyzer;\nvar _c;\n$RefreshReg$(_c, \"PostureAnalyzer\");","map":{"version":3,"names":["React","useEffect","PostureAnalyzer","videoRef","onScoreUpdate","_s","current","script","document","createElement","src","async","onload","faceMesh","window","FaceMesh","locateFile","file","setOptions","maxNumFaces","refineLandmarks","minDetectionConfidence","minTrackingConfidence","onResults","results","multiFaceLandmarks","landmarks","leftEye","rightEye","nose","eyeCenterX","x","gazeOffset","Math","abs","eyeScore","min","interval","setInterval","readyState","send","image","clearInterval","body","appendChild","_c","$RefreshReg$"],"sources":["/Users/siva/Desktop/AI-INTERVIEW/client/src/components/PostureAnalyzer.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\n\nexport default function PostureAnalyzer({ videoRef, onScoreUpdate }) {\n\n  useEffect(() => {\n    if (!videoRef?.current) return;\n\n    // Load MediaPipe script dynamically\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js\";\n    script.async = true;\n\n    script.onload = () => {\n      const faceMesh = new window.FaceMesh({\n        locateFile: (file) =>\n          `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`,\n      });\n\n      faceMesh.setOptions({\n        maxNumFaces: 1,\n        refineLandmarks: true,\n        minDetectionConfidence: 0.5,\n        minTrackingConfidence: 0.5,\n      });\n\n      faceMesh.onResults((results) => {\n        if (!results.multiFaceLandmarks) return;\n\n        const landmarks = results.multiFaceLandmarks[0];\n\n        const leftEye = landmarks[33];\n        const rightEye = landmarks[263];\n        const nose = landmarks[1];\n\n        const eyeCenterX = (leftEye.x + rightEye.x) / 2;\n        const gazeOffset = Math.abs(nose.x - eyeCenterX);\n\n        const eyeScore = 1 - Math.min(gazeOffset * 3, 1);\n\n        onScoreUpdate(eyeScore);\n      });\n\n      const interval = setInterval(async () => {\n        if (videoRef.current.readyState >= 2) {\n          await faceMesh.send({ image: videoRef.current });\n        }\n      }, 100);\n\n      return () => clearInterval(interval);\n    };\n\n    document.body.appendChild(script);\n  }, [videoRef, onScoreUpdate]);\n\n  return null;\n}"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAExC,eAAe,SAASC,eAAeA,CAAC;EAAEC,QAAQ;EAAEC;AAAc,CAAC,EAAE;EAAAC,EAAA;EAEnEJ,SAAS,CAAC,MAAM;IACd,IAAI,EAACE,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEG,OAAO,GAAE;;IAExB;IACA,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,MAAM,CAACG,GAAG,GACR,gEAAgE;IAClEH,MAAM,CAACI,KAAK,GAAG,IAAI;IAEnBJ,MAAM,CAACK,MAAM,GAAG,MAAM;MACpB,MAAMC,QAAQ,GAAG,IAAIC,MAAM,CAACC,QAAQ,CAAC;QACnCC,UAAU,EAAGC,IAAI,IACf,qDAAqDA,IAAI;MAC7D,CAAC,CAAC;MAEFJ,QAAQ,CAACK,UAAU,CAAC;QAClBC,WAAW,EAAE,CAAC;QACdC,eAAe,EAAE,IAAI;QACrBC,sBAAsB,EAAE,GAAG;QAC3BC,qBAAqB,EAAE;MACzB,CAAC,CAAC;MAEFT,QAAQ,CAACU,SAAS,CAAEC,OAAO,IAAK;QAC9B,IAAI,CAACA,OAAO,CAACC,kBAAkB,EAAE;QAEjC,MAAMC,SAAS,GAAGF,OAAO,CAACC,kBAAkB,CAAC,CAAC,CAAC;QAE/C,MAAME,OAAO,GAAGD,SAAS,CAAC,EAAE,CAAC;QAC7B,MAAME,QAAQ,GAAGF,SAAS,CAAC,GAAG,CAAC;QAC/B,MAAMG,IAAI,GAAGH,SAAS,CAAC,CAAC,CAAC;QAEzB,MAAMI,UAAU,GAAG,CAACH,OAAO,CAACI,CAAC,GAAGH,QAAQ,CAACG,CAAC,IAAI,CAAC;QAC/C,MAAMC,UAAU,GAAGC,IAAI,CAACC,GAAG,CAACL,IAAI,CAACE,CAAC,GAAGD,UAAU,CAAC;QAEhD,MAAMK,QAAQ,GAAG,CAAC,GAAGF,IAAI,CAACG,GAAG,CAACJ,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC;QAEhD5B,aAAa,CAAC+B,QAAQ,CAAC;MACzB,CAAC,CAAC;MAEF,MAAME,QAAQ,GAAGC,WAAW,CAAC,YAAY;QACvC,IAAInC,QAAQ,CAACG,OAAO,CAACiC,UAAU,IAAI,CAAC,EAAE;UACpC,MAAM1B,QAAQ,CAAC2B,IAAI,CAAC;YAAEC,KAAK,EAAEtC,QAAQ,CAACG;UAAQ,CAAC,CAAC;QAClD;MACF,CAAC,EAAE,GAAG,CAAC;MAEP,OAAO,MAAMoC,aAAa,CAACL,QAAQ,CAAC;IACtC,CAAC;IAED7B,QAAQ,CAACmC,IAAI,CAACC,WAAW,CAACrC,MAAM,CAAC;EACnC,CAAC,EAAE,CAACJ,QAAQ,EAAEC,aAAa,CAAC,CAAC;EAE7B,OAAO,IAAI;AACb;AAACC,EAAA,CAtDuBH,eAAe;AAAA2C,EAAA,GAAf3C,eAAe;AAAA,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}